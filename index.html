<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Microscope Simulator</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app-container">
        <div class="main-panel">
            <div class="microscope-view-and-physical-controls">
                <div class="physical-controls-stack">
                    <div class="control-label">Coarse Focus</div>
                    <div id="coarseFocusWheel" class="focus-wheel coarse-wheel" title="Drag Up/Down for Coarse Focus"></div>
                    
                    <div class="control-label">Fine Focus</div>
                    <div id="fineFocusWheel" class="focus-wheel fine-wheel" title="Drag Up/Down for Fine Focus"></div>
                    
                    <div class="control-label">Illumination</div>
                    <div id="illuminationKnob" class="illumination-knob" title="Drag Up/Down for Illumination">
                        <div class="knob-indicator"></div>
                    </div>
                    <p class="optics-readout">Blur: <span id="currentBlurVal">0</span>px</p>
                    <p class="optics-readout">Bright: <span id="currentBrightnessVal">100</span>%</p>
                </div>

                <div class="viewfinder-area">
                    <div class="viewfinder">
                        <img id="slideImage" src="images/placeholder-slide.jpg" alt="Microscope Slide">
                        <canvas id="annotationCanvas"></canvas>
                        <canvas id="scanningGuideCanvas"></canvas>
                    </div>
                </div>
            </div>

            <div class="controls-panel">
                <div class="control-group">
                    <h3>Scenario & Image</h3>
                    <label for="scenarioSelect">Load Scenario:</label>
                    <select id="scenarioSelect">
                        <option value="">-- Select Scenario --</option>
                    </select>
                    <input type="file" id="imageUpload" accept="image/png, image/jpeg" title="Upload custom image">
                    <button id="addAnnotationMode">Add Quiz Point</button>
                    <p id="annotationInstructions" class="instructions-text"></p>
                </div>

                <div class="control-group">
                    <h3>Objectives</h3>
                    <button class="objective-btn" data-zoom="0.5">Scan (4x)</button>
                    <button class="objective-btn" data-zoom="1">Low (10x)</button>
                    <button class="objective-btn" data-zoom="2">High (40x)</button>
                    <button class="objective-btn" data-zoom="4">Oil (100x)</button>
                    <p>Current Zoom: <span id="currentZoomVal">1</span>x</p>
                </div>
                
                <div class="control-group">
                    <h3>Advanced Optics (Sliders)</h3>
                    <label for="contrastControl">Contrast (Condenser):</label>
                    <input type="range" id="contrastControl" min="0.7" max="1.3" value="1" step="0.05">
                    <label for="fieldDiaphragm">Field Diaphragm:</label>
                    <input type="range" id="fieldDiaphragm" min="0" max="100" value="100" step="5">
                    <p>Contrast: <span id="currentContrastVal">100</span>%</p>
                </div>

                <div class="control-group">
                    <h3>Stage (Drag Image)</h3>
                    <p>X: <span id="stageXVal">0</span>, Y: <span id="stageYVal">0</span></p>
                    <button id="resetPosition">Reset Position</button>
                    <button id="toggleScanningGuide">Toggle Scan Guide</button>
                </div>
            </div>
        </div>

        <div class="side-panel">
            <div class="tutorial-panel">
                <h3>Guided Tutorial</h3>
                <select id="tutorialSelect">
                    <option value="">-- Select Tutorial --</option>
                </select>
                <button id="startTutorialBtn">Start Selected Tutorial</button>
                <div id="tutorialStepDisplay">
                    <p id="tutorialText">Select a tutorial to begin.</p>
                    <button id="prevStepBtn" disabled>Previous</button>
                    <button id="nextStepBtn" disabled>Next</button>
                </div>
            </div>

            <div class="info-panel">
                <h3>Identification & Notes</h3>
                <p id="instructionText">Adjust view and identify features. For scenarios, answers will be checked.</p>
                <div id="quizArea"></div>
            </div>

            <div class="save-load-panel">
                <h3>Progress</h3>
                <button id="saveProgressBtn">Save Progress</button>
                <button id="loadProgressBtn">Load Progress</button>
                <button id="clearProgressBtn">Clear Saved</button>
                <p id="saveLoadStatus" class="instructions-text"></p>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
